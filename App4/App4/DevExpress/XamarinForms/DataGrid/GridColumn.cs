// Generated by .NET Reflector from D:\workspace\mobile\hito-mobile\HitoApp\lampart_lib_dll\DevExpress.XamarinForms.Grid.dll
namespace DevExpress.XamarinForms.DataGrid
{
    using DevExpress.Collections;
    using DevExpress.Data;
    using DevExpress.Data.Filtering;
    using DevExpress.Data.Filtering.Helpers;
    using DevExpress.Data.Helpers;
    using DevExpress.Utils;
    using DevExpress.XamarinForms.Core.Internal;
    using DevExpress.XamarinForms.DataGrid.Internal;
    using System;
    using System.Collections.Generic;
    using System.ComponentModel;
    using System.Linq.Expressions;
    using System.Reflection;
    using System.Runtime.CompilerServices;
    using System.Threading;
    using Xamarin.Forms;
    
    public abstract class GridColumn : BindableObject, IFieldValueVisitor
    {
        private const double minWidth = 50.0;
        private const double maxWidth = double.MaxValue;
        internal const int defaultSortIndex = -1;
        internal const int singleModeSortIndex = 1;
        public static readonly BindableProperty FieldNameProperty;
        public static readonly BindableProperty WidthProperty;
        public static readonly BindableProperty MinWidthProperty;
        public static readonly BindableProperty MaxWidthProperty;
        public static readonly BindableProperty SortOrderProperty;
        public static readonly BindableProperty SortModeProperty;
        public static readonly BindableProperty DisplayFormatProperty;
        public static readonly BindableProperty UnboundTypeProperty;
        public static readonly BindableProperty UnboundExpressionProperty;
        public static readonly BindableProperty CaptionProperty;
        public static readonly BindableProperty EditFormCaptionProperty;
        public static readonly BindableProperty IsReadOnlyProperty;
        public static readonly BindableProperty AllowSortProperty;
        public static readonly BindableProperty SortIndexProperty;
        public static readonly BindableProperty IsGroupedProperty;
        public static readonly BindableProperty IsVisibleProperty;
        public static readonly BindableProperty GroupIntervalProperty;
        public static readonly BindableProperty FixedStyleProperty;
        public static readonly BindableProperty HorizontalContentAlignmentProperty;
        public static readonly BindableProperty VerticalContentAlignmentProperty;
        public static readonly BindableProperty GroupValueDisplayFormatProperty;
        private static readonly BindableProperty AllowAutoFilterProperty;
        private static readonly BindableProperty ImmediateUpdateAutoFilterProperty;
        private static readonly BindableProperty AutoFilterConditionProperty;
        private static readonly BindableProperty AutoFilterValueProperty;
        private static readonly BindableProperty FilterModeProperty;
        private static readonly BindableProperty AllowGroupProperty;
        private DevExpress.XamarinForms.DataGrid.Internal.PropertyAccessor propertyAccessor;
        private SortDescriptor<IRowData> comparer;
        private IComparer<IRowData> ascendingComparer;
        private GroupDescriptor<IRowData> groupByComparer;
        [CompilerGenerated]
        public event PropertyChangedEventHandler AfterPropertyChanged;
        
        static GridColumn()
        {
            FieldNameProperty = GetBindableProperty<string>("FieldName", string.Empty, OnFieldNameChanged);
            WidthProperty = GetBindableProperty<GridLength>("Width", new GridLength(1.0, GridUnitType.Star), null);
            MinWidthProperty = GetBindableProperty<double>("MinWidth", 50.0, null);
            MaxWidthProperty = GetBindableProperty<double>("MaxWidth", double.MaxValue, null);
            SortOrderProperty = GetBindableProperty<ColumnSortOrder>("SortOrder", ColumnSortOrder.None, OnSortOrderChanged);
            BindableProperty.CreateDefaultValueDelegate defaultValueCreator = GetDefaultSortMode;
            SortModeProperty = GetBindableProperty<ColumnSortMode>("SortMode", ColumnSortMode.Value, OnSortModeChanged, defaultValueCreator);
            defaultValueCreator = GetDefaultDisplayText;
            DisplayFormatProperty = GetBindableProperty<string>("DisplayFormat", null, OnDisplayFormatChanged, defaultValueCreator);
            UnboundTypeProperty = GetBindableProperty<UnboundColumnType>("UnboundType", UnboundColumnType.Bound, OnUnboundTypeChanged);
            UnboundExpressionProperty = GetBindableProperty<string>("UnboundExpression", string.Empty, OnUnboundExpressionChanged);
            CaptionProperty = GetBindableProperty<string>("Caption", string.Empty, OnCaptionChanged);
            EditFormCaptionProperty = GetBindableProperty<string>("EditFormCaption", string.Empty, null);
            IsReadOnlyProperty = GetBindableProperty<bool>("IsReadOnly", false, OnIsReadOnlyChanged);
            AllowSortProperty = GetBindableProperty<DefaultBoolean>("AllowSort", DefaultBoolean.Default, OnAllowSortChanged);
            SortIndexProperty = GetBindableProperty<int>("SortIndex", -1, OnSortIndexChanged);
            IsGroupedProperty = GetBindableProperty<bool>("IsGrouped", false, OnIsGroupedChanged);
            IsVisibleProperty = GetBindableProperty<bool>("IsVisible", true, OnIsVisibleChanged);
            GroupIntervalProperty = GetBindableProperty<ColumnGroupInterval>("GroupInterval", ColumnGroupInterval.Default, OnGroupIntervalChanged);
            FixedStyleProperty = GetBindableProperty<FixedStyle>("FixedStyle", DevExpress.XamarinForms.DataGrid.FixedStyle.None, OnFixedStyleChanged);
            defaultValueCreator = GetDefaultHorizontalContentAlignment;
            HorizontalContentAlignmentProperty = GetBindableProperty<TextAlignment>("HorizontalContentAlignment", 0, OnHorizontalContentAlignmentChanged, defaultValueCreator);
            defaultValueCreator = GetDefaultVerticalContentAlignment;
            VerticalContentAlignmentProperty = GetBindableProperty<TextAlignment>("VerticalContentAlignment", TextAlignment.Center, OnVerticalContentAlignmentChanged, defaultValueCreator);
            GroupValueDisplayFormatProperty = GetBindableProperty<string>("GroupValueDisplayFormat", null, OnGroupValueDisplayFormatChanged);
            AllowAutoFilterProperty = GetBindableProperty<bool>("AllowAutoFilter", true, OnAllowAutoFilterChanged);
            ImmediateUpdateAutoFilterProperty = GetBindableProperty<bool>("ImmediateUpdateAutoFilter", true, OnImmediateUpdateAutoFilterChanged);
            AutoFilterConditionProperty = GetBindableProperty<DevExpress.Data.AutoFilterCondition>("AutoFilterCondition", DevExpress.Data.AutoFilterCondition.Default, OnAutoFilterConditionChanged);
            AutoFilterValueProperty = GetBindableProperty<object>("AutoFilterValue", null, OnAutoFilterValueChanged);
            FilterModeProperty = GetBindableProperty<ColumnFilterMode>("FilterMode", ColumnFilterMode.Value, OnFilterModeChanged);
            AllowGroupProperty = GetBindableProperty<DefaultBoolean>("AllowGroup", DefaultBoolean.Default, OnAllowGroupChanged);
        }

        private static BindableProperty GetBindableProperty<TObject>(string propertyName, TObject defaultVal, BindableProperty.BindingPropertyChangedDelegate propertyDelegate, BindableProperty.CreateDefaultValueDelegate defaultValueDelegate = null)
        {
            try
            {
                ParameterExpression expression = Expression.Parameter(typeof(GridColumn), "o");
                ParameterExpression[] expressionArray1 = new ParameterExpression[] { expression };
                PropertyInfo property = typeof(GridColumn).GetProperty(propertyName, BindingFlags.Public | BindingFlags.NonPublic | BindingFlags.Instance);
                if(Nullable.Equals(property, null)) property = typeof(GridColumn).GetRuntimeProperty(propertyName);
                return BindingUtils.Instance.CreateBindableProperty<GridColumn, TObject>(Expression.Lambda<Func<GridColumn, TObject>>((Expression)Expression.Property((Expression)expression, property), expressionArray1), defaultVal, BindingMode.OneWay, null, propertyDelegate, null, null, defaultValueDelegate);
            }
            catch (Exception ex)
            {

            }
            return null;
        }

        protected GridColumn()
        {
        }
        
        protected virtual ColumnGroupInterval CalculateActualColumnGroupInterval()
        {
            if ((this.GroupInterval != ColumnGroupInterval.Default) && ((this.GroupInterval == ColumnGroupInterval.DisplayText) || (this.GroupInterval == ColumnGroupInterval.Alphabetical)))
            {
                return this.GroupInterval;
            }
            return ColumnGroupInterval.Value;
        }
        
        protected SortDescriptor<IRowData> CreateComparer() => 
            this.CreateSortDescriptorCore(this.SortOrder);
        
        private IComparer<IRowData> CreateComparer(Type propertyType, bool isAscending)
        {
            if ((propertyType == null) || (propertyType == typeof(object)))
            {
                return new NumbersComparer(this.FieldName, isAscending, this.SortMode, this);
            }
            return ((propertyType != typeof(string)) ? ((propertyType != typeof(int)) ? ((propertyType != typeof(DateTime)) ? ((propertyType != typeof(DateTime?)) ? ((propertyType != typeof(bool)) ? ((propertyType != typeof(long)) ? ((propertyType != typeof(float)) ? ((propertyType != typeof(double)) ? ((propertyType != typeof(decimal)) ? ((propertyType != typeof(byte)) ? ((propertyType != typeof(short)) ? ((propertyType != typeof(uint)) ? ((propertyType != typeof(sbyte)) ? ((propertyType != typeof(ulong)) ? ((IComparer<IRowData>) new NumbersComparer(this.FieldName, isAscending, this.SortMode, this)) : ((IComparer<IRowData>) new ColumnComparer<ulong>(this.FieldName, isAscending, this.SortMode, this))) : ((IComparer<IRowData>) new ColumnComparer<sbyte>(this.FieldName, isAscending, this.SortMode, this))) : ((IComparer<IRowData>) new ColumnComparer<uint>(this.FieldName, isAscending, this.SortMode, this))) : ((IComparer<IRowData>) new ColumnComparer<short>(this.FieldName, isAscending, this.SortMode, this))) : ((IComparer<IRowData>) new ColumnComparer<byte>(this.FieldName, isAscending, this.SortMode, this))) : ((IComparer<IRowData>) new ColumnComparer<decimal>(this.FieldName, isAscending, this.SortMode, this))) : ((IComparer<IRowData>) new ColumnComparer<double>(this.FieldName, isAscending, this.SortMode, this))) : ((IComparer<IRowData>) new ColumnComparer<float>(this.FieldName, isAscending, this.SortMode, this))) : ((IComparer<IRowData>) new ColumnComparer<long>(this.FieldName, isAscending, this.SortMode, this))) : ((IComparer<IRowData>) new ColumnComparer<bool>(this.FieldName, isAscending, this.SortMode, this))) : ((IComparer<IRowData>) new ColumnComparer<DateTime?>(this.FieldName, isAscending, this.SortMode, this))) : ((IComparer<IRowData>) new ColumnComparer<DateTime>(this.FieldName, isAscending, this.SortMode, this))) : ((IComparer<IRowData>) new ColumnComparer<int>(this.FieldName, isAscending, this.SortMode, this))) : ((IComparer<IRowData>) new ColumnComparer<string>(this.FieldName, isAscending, this.SortMode, this)));
        }
        
        protected GroupDescriptor<IRowData> CreateGroupByComparer()
        {
            RowDataGroupDescriptor descriptor = new RowDataGroupDescriptor();
            this.SetupSortDescriptorCore(descriptor, (this.SortOrder == ColumnSortOrder.Descending) ? ColumnSortOrder.Descending : ColumnSortOrder.Ascending);
            descriptor.DisplayFormat = this.DisplayFormat;
            descriptor.GroupInterval = this.CalculateActualColumnGroupInterval();
            return descriptor;
        }
        
        private SortDescriptor<IRowData> CreateSortDescriptorCore(ColumnSortOrder sortOrder)
        {
            SortDescriptor<IRowData> descriptor = new SortDescriptor<IRowData>();
            this.SetupSortDescriptorCore(descriptor, sortOrder);
            return descriptor;
        }
        
        internal Func<IRowData, object> CreateUnboundFieldFunction()
        {
            if (string.IsNullOrEmpty(this.UnboundExpression))
            {
                return null;
            }
            CriteriaOperator criteria = CriteriaOperator.Parse(this.UnboundExpression, Array.Empty<object>());
            ExpressionEvaluator evaluator = new ExpressionEvaluator(new CustomEvaluatorContextDescriptor(this), criteria, false);
            return delegate (IRowData row) {
                return evaluator.Evaluate(row);
            };
        }
        
        object IFieldValueVisitor.GetFieldValue(IRowData rowData) => 
            this.GetFieldValueForVisitor(rowData, false);
        
        object IFieldValueVisitor.GetFormattedFieldValue(IRowData rowData) => 
            this.GetFieldValueForVisitor(rowData, true);
        
        internal virtual ColumnSortMode GetActualSortModeForVisitor() => 
            this.SortMode;
        
        protected virtual Type GetComparerPropertyType() => 
            this.GetComparerPropertyTypeCore();
        
        protected Type GetComparerPropertyTypeCore()
        {
            if ((this.PropertyAccessor == null) || (this.PropertyAccessor.PropertyType == null))
            {
                return null;
            }
            return this.PropertyAccessor.PropertyType;
        }
        
        protected virtual string GetDefaultDisplayText() => 
            null;
        
        private static object GetDefaultDisplayText(BindableObject bindable)
        {
            GridColumn column = bindable as GridColumn;
            return column?.GetDefaultDisplayText();
        }
        
        protected virtual TextAlignment GetDefaultHorizontalContentAlignment() => 
            0;
        
        private static object GetDefaultHorizontalContentAlignment(BindableObject bindable)
        {
            GridColumn column = bindable as GridColumn;
            return ((column != null) ? column.GetDefaultHorizontalContentAlignment() : 0);
        }
        
        protected virtual ColumnSortMode GetDefaultSortMode() => 
            ColumnSortMode.Value;
        
        private static object GetDefaultSortMode(BindableObject bindable)
        {
            GridColumn column = bindable as GridColumn;
            return ((column != null) ? column.GetDefaultSortMode() : 0);
        }
        
        protected virtual TextAlignment GetDefaultVerticalContentAlignment() => 
            TextAlignment.Center;
        
        private static object GetDefaultVerticalContentAlignment(BindableObject bindable)
        {
            GridColumn column = bindable as GridColumn;
            return ((column != null) ? column.GetDefaultVerticalContentAlignment() : 0);
        }
        
        internal virtual Type GetFieldTypeForVisitor() => 
            ((this.SortMode != ColumnSortMode.DisplayText) ? this.GetPreferredDataType() : typeof(string));
        
        internal virtual object GetFieldValueForVisitor(IRowData rowData, bool format)
        {
            if (((IFieldValueVisitor) this).ActualSortMode != ColumnSortMode.DisplayText)
            {
                return null;
            }
            object fieldValue = rowData.GetFieldValue(this.FieldName);
            if (format && (fieldValue != null))
            {
                fieldValue = CustomizeCellTextHelper.Format(fieldValue, this.DisplayFormat, rowData.RowHandle, this.FieldName, this.CustomCellTextProvider);
            }
            return fieldValue?.ToString();
        }
        
        internal Type GetPreferredDataType()
        {
            if (!this.IsUnbound)
            {
                return this.GetComparerPropertyType();
            }
            switch (this.UnboundType)
            {
                case UnboundColumnType.Integer:
                    return typeof(int);
                
                case UnboundColumnType.Decimal:
                    return typeof(decimal);
                
                case UnboundColumnType.DateTime:
                    return typeof(DateTime);
                
                case UnboundColumnType.String:
                    return typeof(string);
                
                case UnboundColumnType.Boolean:
                    return typeof(bool);
            }
            return typeof(object);
        }
        
        internal static bool IsPropertyAffectsFilter(string propertyName) => 
            ((propertyName == "DisplayFormat") || ((propertyName == "FieldName") || ((propertyName == "AutoFilterCondition") || ((propertyName == "AutoFilterValue") || ((propertyName == "AllowAutoFilter") || ((propertyName == "ColumnFilterMode") || ((propertyName == "ImmediateUpdateAutoFilter") || ((propertyName == "DisplayMember") || (propertyName == "ValueMember")))))))));
        
        internal static bool IsPropertyAffectsUnboundFields(string propertyName) => 
            ((propertyName == UnboundExpressionProperty.PropertyName) || (propertyName == UnboundTypeProperty.PropertyName));
        
        private static void OnAllowAutoFilterChanged(BindableObject obj, object oldValue, object newValue)
        {
            ((GridColumn) obj).RaiseAfterPropertyChanged(AllowAutoFilterProperty.PropertyName);
        }
        
        private static void OnAllowGroupChanged(BindableObject obj, object oldValue, object newValue)
        {
            ((GridColumn) obj).RaiseAfterPropertyChanged(AllowGroupProperty.PropertyName);
        }
        
        private static void OnAllowSortChanged(BindableObject obj, object oldValue, object newValue)
        {
            ((GridColumn) obj).RaiseAfterPropertyChanged(AllowSortProperty.PropertyName);
        }
        
        private static void OnAutoFilterConditionChanged(BindableObject obj, object oldValue, object newValue)
        {
            ((GridColumn) obj).RaiseAfterPropertyChanged(AutoFilterConditionProperty.PropertyName);
        }
        
        private static void OnAutoFilterValueChanged(BindableObject obj, object oldValue, object newValue)
        {
            ((GridColumn) obj).RaiseAfterPropertyChanged(AutoFilterValueProperty.PropertyName);
        }
        
        protected void OnCaptionChanged()
        {
            this.OnPropertyChanged("ActualCaption");
        }
        
        private static void OnCaptionChanged(BindableObject obj, object oldValue, object newValue)
        {
            GridColumn column1 = obj as GridColumn;
            column1.OnCaptionChanged();
            column1.RaiseAfterPropertyChanged(CaptionProperty.PropertyName);
        }
        
        protected internal void OnDisplayFormatChanged()
        {
        }
        
        private static void OnDisplayFormatChanged(BindableObject obj, object oldValue, object newValue)
        {
            GridColumn column1 = obj as GridColumn;
            column1.OnDisplayFormatChanged();
            column1.RaiseAfterPropertyChanged(DisplayFormatProperty.PropertyName);
        }
        
        protected void OnFieldNameChanged()
        {
        }
        
        private static void OnFieldNameChanged(BindableObject obj, object oldValue, object newValue)
        {
            GridColumn column1 = obj as GridColumn;
            column1.OnFieldNameChanged();
            column1.RaiseAfterPropertyChanged(FieldNameProperty.PropertyName);
        }
        
        private static void OnFilterModeChanged(BindableObject obj, object oldValue, object newValue)
        {
            ((GridColumn) obj).RaiseAfterPropertyChanged(FilterModeProperty.PropertyName);
        }
        
        private static void OnFixedStyleChanged(BindableObject obj, object oldValue, object newValue)
        {
            ((GridColumn) obj).RaiseAfterPropertyChanged(FixedStyleProperty.PropertyName);
        }
        
        private void OnGroupIntervalChanged()
        {
            this.ResetGroupByComparer();
        }
        
        private static void OnGroupIntervalChanged(BindableObject obj, object oldValue, object newValue)
        {
            GridColumn column1 = obj as GridColumn;
            column1.OnGroupIntervalChanged();
            column1.RaiseAfterPropertyChanged(GroupIntervalProperty.PropertyName);
        }
        
        private static void OnGroupValueDisplayFormatChanged(BindableObject obj, object oldValue, object newValue)
        {
            ((GridColumn) obj).RaiseAfterPropertyChanged(GroupValueDisplayFormatProperty.PropertyName);
        }
        
        private static void OnHorizontalContentAlignmentChanged(BindableObject obj, object oldValue, object newValue)
        {
            ((GridColumn) obj).RaiseAfterPropertyChanged(HorizontalContentAlignmentProperty.PropertyName);
        }
        
        private static void OnImmediateUpdateAutoFilterChanged(BindableObject obj, object oldValue, object newValue)
        {
            ((GridColumn) obj).RaiseAfterPropertyChanged(ImmediateUpdateAutoFilterProperty.PropertyName);
        }
        
        private static void OnIsGroupedChanged(BindableObject obj, object oldValue, object newValue)
        {
            ((GridColumn) obj).RaiseAfterPropertyChanged(IsGroupedProperty.PropertyName);
        }
        
        private static void OnIsReadOnlyChanged(BindableObject obj, object oldValue, object newValue)
        {
            ((GridColumn) obj).RaiseAfterPropertyChanged(IsReadOnlyProperty.PropertyName);
        }
        
        private static void OnIsVisibleChanged(BindableObject obj, object oldValue, object newValue)
        {
            ((GridColumn) obj).RaiseAfterPropertyChanged(IsVisibleProperty.PropertyName);
        }
        
        private static void OnSortIndexChanged(BindableObject obj, object oldValue, object newValue)
        {
            ((GridColumn) obj).RaiseAfterPropertyChanged(SortIndexProperty.PropertyName);
        }
        
        private void OnSortModeChanged(ColumnSortMode oldValue, ColumnSortMode newValue)
        {
            if (this.SortComparer != null)
            {
                this.SortComparer.SortMode = newValue;
            }
            if (this.GroupComparer != null)
            {
                this.GroupComparer.SortMode = newValue;
            }
            this.ResetComparer();
            this.ResetAscendingComparer();
            this.ResetGroupByComparer();
        }
        
        private static void OnSortModeChanged(BindableObject obj, object oldValue, object newValue)
        {
            GridColumn column1 = obj as GridColumn;
            column1.OnSortModeChanged((ColumnSortMode) oldValue, (ColumnSortMode) newValue);
            column1.RaiseAfterPropertyChanged(SortModeProperty.PropertyName);
        }
        
        private void OnSortOrderChanged(ColumnSortOrder oldValue, ColumnSortOrder newValue)
        {
            this.ResetComparer();
            this.ResetGroupByComparer();
        }
        
        private static void OnSortOrderChanged(BindableObject obj, object oldValue, object newValue)
        {
            GridColumn column1 = obj as GridColumn;
            column1.OnSortOrderChanged((ColumnSortOrder) oldValue, (ColumnSortOrder) newValue);
            column1.RaiseAfterPropertyChanged(SortOrderProperty.PropertyName);
        }
        
        private void OnUnboundChanged()
        {
        }
        
        private static void OnUnboundExpressionChanged(BindableObject obj, object oldValue, object newValue)
        {
            GridColumn column1 = obj as GridColumn;
            column1.OnUnboundChanged();
            column1.RaiseAfterPropertyChanged(UnboundExpressionProperty.PropertyName);
        }
        
        protected virtual void OnUnboundTypeChanged()
        {
            this.OnUnboundChanged();
        }
        
        private static void OnUnboundTypeChanged(BindableObject obj, object oldValue, object newValue)
        {
            GridColumn column1 = obj as GridColumn;
            column1.OnUnboundTypeChanged();
            column1.RaiseAfterPropertyChanged(UnboundTypeProperty.PropertyName);
        }
        
        private static void OnVerticalContentAlignmentChanged(BindableObject obj, object oldValue, object newValue)
        {
            ((GridColumn) obj).RaiseAfterPropertyChanged(VerticalContentAlignmentProperty.PropertyName);
        }
        
        protected void RaiseAfterPropertyChanged(string propertyName)
        {
            if (this.AfterPropertyChanged != null)
            {
                PropertyChangedEventArgs args = new PropertyChangedEventArgs(propertyName);
                this.AfterPropertyChanged(this, args);
            }
        }
        
        private void ResetAscendingComparer()
        {
            this.ascendingComparer = null;
        }
        
        private void ResetComparer()
        {
            this.comparer = null;
        }
        
        internal void ResetComparers()
        {
            this.ResetComparer();
            this.ResetAscendingComparer();
            this.ResetGroupByComparer();
        }
        
        protected void ResetGroupByComparer()
        {
            this.groupByComparer = null;
        }
        
        protected internal virtual void SetPropertyAccessor(DevExpress.XamarinForms.DataGrid.Internal.PropertyAccessor accessor)
        {
            this.propertyAccessor = accessor;
        }
        
        private void SetupSortDescriptorCore(SortDescriptor<IRowData> descriptor, ColumnSortOrder sortOrder)
        {
            descriptor.FieldName = this.FieldName;
            descriptor.FieldType = this.GetComparerPropertyType();
            descriptor.AscendingComparer = (this.ascendingComparer == null) ? this.CreateComparer(descriptor.FieldType, true) : this.ascendingComparer;
            this.ascendingComparer = descriptor.AscendingComparer;
            descriptor.FieldValueVisitor = this;
            descriptor.SortOrder = sortOrder;
            descriptor.SortMode = this.SortMode;
        }
        
        public string FieldName
        {
            get => (string) base.GetValue(FieldNameProperty);
            set => 
                base.SetValue(FieldNameProperty, value);
        }
        
        public GridLength Width
        {
            get => 
                ((GridLength) base.GetValue(WidthProperty));
            set => 
                base.SetValue(WidthProperty, value);
        }
        
        public double MinWidth
        {
            get => 
                ((double) ((double) base.GetValue(MinWidthProperty)));
            set => 
                base.SetValue(MinWidthProperty, (double) value);
        }
        
        public double MaxWidth
        {
            get => 
                ((double) ((double) base.GetValue(MaxWidthProperty)));
            set => 
                base.SetValue(MaxWidthProperty, (double) value);
        }
        
        public ColumnSortOrder SortOrder
        {
            get => 
                ((ColumnSortOrder) base.GetValue(SortOrderProperty));
            set => 
                base.SetValue(SortOrderProperty, value);
        }
        
        public ColumnSortMode SortMode
        {
            get => 
                ((ColumnSortMode) base.GetValue(SortModeProperty));
            set => 
                base.SetValue(SortModeProperty, value);
        }
        
        public string DisplayFormat
        {
            get => 
                ((string) ((string) base.GetValue(DisplayFormatProperty)));
            set => 
                base.SetValue(DisplayFormatProperty, value);
        }
        
        public UnboundColumnType UnboundType
        {
            get => 
                ((UnboundColumnType) base.GetValue(UnboundTypeProperty));
            set => 
                base.SetValue(UnboundTypeProperty, value);
        }
        
        public string UnboundExpression
        {
            get => 
                ((string) ((string) base.GetValue(UnboundExpressionProperty)));
            set => 
                base.SetValue(UnboundExpressionProperty, value);
        }
        
        public string Caption
        {
            get => (string) base.GetValue(CaptionProperty);
            set => base.SetValue(CaptionProperty, value);
        }
        
        public string EditFormCaption
        {
            get => 
                ((string) ((string) base.GetValue(EditFormCaptionProperty)));
            set => 
                base.SetValue(EditFormCaptionProperty, value);
        }
        
        public bool IsReadOnly
        {
            get => 
                ((bool) ((bool) base.GetValue(IsReadOnlyProperty)));
            set => 
                base.SetValue(IsReadOnlyProperty, (bool) value);
        }
        
        internal ColumnFilterMode FilterMode
        {
            get => 
                ((ColumnFilterMode) base.GetValue(FilterModeProperty));
            set => 
                base.SetValue(FilterModeProperty, value);
        }
        
        public DefaultBoolean AllowSort
        {
            get => 
                ((DefaultBoolean) base.GetValue(AllowSortProperty));
            set => 
                base.SetValue(AllowSortProperty, value);
        }
        
        protected DefaultBoolean AllowGroup
        {
            get => 
                ((DefaultBoolean) base.GetValue(AllowGroupProperty));
            set => 
                base.SetValue(AllowGroupProperty, value);
        }
        
        internal bool AllowAutoFilter
        {
            get => 
                ((bool) ((bool) base.GetValue(AllowAutoFilterProperty)));
            set => 
                base.SetValue(AllowAutoFilterProperty, (bool) value);
        }
        
        public int SortIndex
        {
            get => 
                ((int) ((int) base.GetValue(SortIndexProperty)));
            set => 
                base.SetValue(SortIndexProperty, (int) value);
        }
        
        public bool IsGrouped
        {
            get => 
                ((bool) ((bool) base.GetValue(IsGroupedProperty)));
            set => 
                base.SetValue(IsGroupedProperty, (bool) value);
        }
        
        public bool IsVisible
        {
            get => 
                ((bool) ((bool) base.GetValue(IsVisibleProperty)));
            set => 
                base.SetValue(IsVisibleProperty, (bool) value);
        }
        
        public ColumnGroupInterval GroupInterval
        {
            get => 
                ((ColumnGroupInterval) base.GetValue(GroupIntervalProperty));
            set => 
                base.SetValue(GroupIntervalProperty, value);
        }
        
        public DevExpress.XamarinForms.DataGrid.FixedStyle FixedStyle
        {
            get => 
                ((DevExpress.XamarinForms.DataGrid.FixedStyle) base.GetValue(FixedStyleProperty));
            set => 
                base.SetValue(FixedStyleProperty, value);
        }
        
        internal DevExpress.Data.AutoFilterCondition AutoFilterCondition
        {
            get => 
                ((DevExpress.Data.AutoFilterCondition) base.GetValue(AutoFilterConditionProperty));
            set => 
                base.SetValue(AutoFilterConditionProperty, value);
        }
        
        internal object AutoFilterValue
        {
            get => 
                base.GetValue(AutoFilterValueProperty);
            set => 
                base.SetValue(AutoFilterValueProperty, value);
        }
        
        internal bool ImmediateUpdateAutoFilter
        {
            get => 
                ((bool) ((bool) base.GetValue(ImmediateUpdateAutoFilterProperty)));
            set => 
                base.SetValue(ImmediateUpdateAutoFilterProperty, (bool) value);
        }
        
        public TextAlignment HorizontalContentAlignment
        {
            get => 
                ((TextAlignment) base.GetValue(HorizontalContentAlignmentProperty));
            set => 
                base.SetValue(HorizontalContentAlignmentProperty, value);
        }
        
        public TextAlignment VerticalContentAlignment
        {
            get => 
                ((TextAlignment) base.GetValue(VerticalContentAlignmentProperty));
            set => 
                base.SetValue(VerticalContentAlignmentProperty, value);
        }
        
        public string GroupValueDisplayFormat
        {
            get => 
                ((string) ((string) base.GetValue(GroupValueDisplayFormatProperty)));
            set => 
                base.SetValue(GroupValueDisplayFormatProperty, value);
        }
        
        public string ActualCaption =>
            (!string.IsNullOrEmpty(this.Caption) ? this.Caption : SplitStringHelper.SplitPascalCaseString(this.FieldName));
        
        public bool IsUnbound =>
            ((this.UnboundType != UnboundColumnType.Bound) || !string.IsNullOrEmpty(this.UnboundExpression));
        
        internal bool HasFixedSeparator { get; set; }
        
        protected internal bool IsAutoGenerated { get; set; }
        
        protected internal DevExpress.XamarinForms.DataGrid.Internal.PropertyAccessor PropertyAccessor =>
            this.propertyAccessor;
        
        protected virtual DevExpress.Data.AutoFilterCondition DefaultAutoFilterCondition =>
            DevExpress.Data.AutoFilterCondition.Like;
        
        internal ICustomCellTextProvider CustomCellTextProvider { get; set; }
        
        internal bool IsParentReadOnly { get; set; }
        
        internal DevExpress.Data.AutoFilterCondition ActualAutoFilterCondition =>
            ((this.AutoFilterCondition != DevExpress.Data.AutoFilterCondition.Default) ? this.AutoFilterCondition : this.DefaultAutoFilterCondition);
        
        protected internal virtual bool ActualIsReadOnly
        {
            get
            {
                if (!this.IsParentReadOnly && ((this.propertyAccessor == null) || !this.propertyAccessor.IsReadOnly))
                {
                    return this.IsReadOnly;
                }
                return true;
            }
        }
        
        Type IFieldValueVisitor.FieldValueType =>
            this.GetFieldTypeForVisitor();
        
        ColumnSortMode IFieldValueVisitor.ActualSortMode =>
            this.GetActualSortModeForVisitor();
        
        internal GroupDescriptor<IRowData> GroupComparer
        {
            get
            {
                if (!this.IsGrouped)
                {
                    return null;
                }
                if (this.groupByComparer == null)
                {
                    this.groupByComparer = this.CreateGroupByComparer();
                }
                return this.groupByComparer;
            }
        }
        
        internal SortDescriptor<IRowData> SortComparer
        {
            get
            {
                if (this.SortOrder == ColumnSortOrder.None)
                {
                    return null;
                }
                if (this.comparer == null)
                {
                    this.comparer = this.CreateComparer();
                }
                return this.comparer;
            }
        }
        
        internal class ColumnComparer<T> : IComparer<IRowData>, GridColumn.IColumnComparer
        {
            public ColumnComparer(string fieldName, bool ascending, ColumnSortMode sortMode, IFieldValueVisitor fieldValueVisitor)
            {
                this.FieldName = fieldName;
                this.Ascending = ascending;
                this.UseGenericMethods = true;
                this.SortMode = sortMode;
                this.FieldValueVisitor = fieldValueVisitor;
            }
            
            public int Compare(IRowData x, IRowData y)
            {
                int num = this.CompareCore(x, y);
                return (this.Ascending ? num : -num);
            }
            
            protected virtual int CompareCore(IRowData x, IRowData y)
            {
                object a = null;
                object b = null;
                ColumnSortMode sortMode = this.SortMode;
                if ((sortMode != ColumnSortMode.DisplayText) || (this.FieldValueVisitor == null))
                {
                    sortMode = ColumnSortMode.Value;
                }
                else
                {
                    a = this.FieldValueVisitor.GetFormattedFieldValue(x);
                    b = this.FieldValueVisitor.GetFormattedFieldValue(y);
                    if ((a == null) || (b == null))
                    {
                        sortMode = ColumnSortMode.Value;
                    }
                }
                if (sortMode == ColumnSortMode.Value)
                {
                    if (!this.UseGenericMethods || !(a is T))
                    {
                        a = x.GetFieldValue(this.FieldName);
                        b = y.GetFieldValue(this.FieldName);
                    }
                    else
                    {
                        a = x.GetFieldValueGeneric<T>(this.FieldName);
                        b = y.GetFieldValueGeneric<T>(this.FieldName);
                    }
                }
                if (!this.UseGenericMethods || !(a is T))
                {
                    return Comparer.Default.Compare(a, b);
                }
                return Comparer<T>.Default.Compare((T) a, (T) b);
            }
            
            protected bool Ascending { get; private set; }
            
            public string FieldName { get; private set; }
            
            public bool UseGenericMethods { get; set; }
            
            public IFieldValueVisitor FieldValueVisitor { get; set; }
            
            public ColumnSortMode SortMode { get; set; }
        }
        
        internal interface IColumnComparer
        {
            bool UseGenericMethods { get; set; }
        }
        
        internal class NumbersComparer : GridColumn.ColumnComparer<object>
        {
            public NumbersComparer(string fieldName, bool ascending, ColumnSortMode sortMode, IFieldValueVisitor fieldValueVisitor) : base(fieldName, ascending, sortMode, fieldValueVisitor)
            {
            }
            
            protected override int CompareCore(IRowData x, IRowData y)
            {
                if ((x != null) && (y != null))
                {
                    object formattedFieldValue = null;
                    object fieldValue = null;
                    ColumnSortMode sortMode = base.SortMode;
                    if ((sortMode != ColumnSortMode.DisplayText) || (base.FieldValueVisitor == null))
                    {
                        sortMode = ColumnSortMode.Value;
                    }
                    else
                    {
                        formattedFieldValue = base.FieldValueVisitor.GetFormattedFieldValue(x);
                        fieldValue = base.FieldValueVisitor.GetFormattedFieldValue(y);
                        if ((formattedFieldValue == null) && (fieldValue == null))
                        {
                            sortMode = ColumnSortMode.Value;
                        }
                    }
                    if (sortMode == ColumnSortMode.Value)
                    {
                        formattedFieldValue = x.GetFieldValue(base.FieldName);
                        fieldValue = y.GetFieldValue(base.FieldName);
                    }
                    if ((formattedFieldValue == null) && (fieldValue == null))
                    {
                        return 0;
                    }
                    if (formattedFieldValue == null)
                    {
                        return -1;
                    }
                    if (fieldValue == null)
                    {
                        return 1;
                    }
                    Type type = formattedFieldValue.GetType();
                    Type type2 = fieldValue.GetType();
                    if (sortMode == ColumnSortMode.DisplayText)
                    {
                        if ((type == typeof(string)) && (type2 == typeof(string)))
                        {
                            return Convert.ToString(formattedFieldValue).CompareTo(Convert.ToString(fieldValue));
                        }
                    }
                    else if (IsNumberType(type) && IsNumberType(type2))
                    {
                        double num = Convert.ToDouble(formattedFieldValue);
                        return ((double) num).CompareTo(Convert.ToDouble(fieldValue));
                    }
                }
                return 0;
            }
            
            public static bool IsNumberType(Type type) => 
                ((type == typeof(int)) || ((type == typeof(long)) || ((type == typeof(float)) || ((type == typeof(double)) || ((type == typeof(decimal)) || ((type == typeof(byte)) || ((type == typeof(short)) || ((type == typeof(uint)) || ((type == typeof(sbyte)) || ((type == typeof(ulong)) || IntrospectionExtensions.GetTypeInfo(type).IsEnum))))))))));
        }
    }
}
