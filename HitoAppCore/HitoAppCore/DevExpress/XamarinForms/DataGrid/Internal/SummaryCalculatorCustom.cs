// Generated by .NET Reflector from D:\workspace\mobile\hito-mobile\HitoApp\lampart_lib_dll\DevExpress.XamarinForms.Grid.dll
namespace DevExpress.XamarinForms.DataGrid.Internal
{
    using DevExpress.XamarinForms.DataGrid;
    using System;
    
    public class SummaryCalculatorCustom : SummaryCalculator
    {
        private readonly IGridDataController controller;
        private readonly string fieldName;
        private readonly GridColumnSummary summary;
        private CustomSummaryEventArgs args;
        
        public SummaryCalculatorCustom(IGridDataController controller, string fieldName, GridColumnSummary summary)
        {
            this.controller = controller;
            this.fieldName = fieldName;
            this.summary = summary;
        }
        
        public override bool Begin()
        {
            this.args = new CustomSummaryEventArgs();
            this.args.GroupInfo = this.summary.GroupInfo;
            this.args.FieldName = this.fieldName;
            this.args.SummaryProcess = CustomSummaryProcess.Start;
            this.controller.RaiseCalculateCustomSummary(this.args);
            this.args.SummaryProcess = CustomSummaryProcess.Calculate;
            return !this.args.TotalValueReady;
        }
        
        public override object End()
        {
            if (this.args == null)
            {
                return null;
            }
            this.args.FieldValue = null;
            this.args.Row = null;
            this.args.SummaryProcess = CustomSummaryProcess.Finalize;
            this.controller.RaiseCalculateCustomSummary(this.args);
            return this.args.TotalValue;
        }
        
        public override object GetFinalResult() => 
            this.args.TotalValue;
        
        public override void ProcessValue(IRowData row, object value, IToDecimalConverter converter)
        {
            this.args.FieldValue = value;
            this.args.Row = row;
            this.controller.RaiseCalculateCustomSummary(this.args);
        }
    }
}
